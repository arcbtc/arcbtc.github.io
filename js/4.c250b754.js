(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"00be":function(e,t,s){"use strict";(function(e){s("ace4"),s("84c3");var a=s("cf57"),o=s("cdde"),r=s("9a13");const n=s("59da");var c=s("6f78");t["a"]={components:{VueQrcode:r["a"]},data(){return{mempool:{endpoint:"https://mempool.space"},btcVerifyAddress:sessionStorage.getItem("VADDR"),btcAddressNo:parseInt(sessionStorage.getItem("ADR")),btcCurrentAddress:"",btcSendAmount:0,btcSendAddress:"",columns:[{name:"desc",required:!0,label:"Transaction id",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"amount",align:"center",label:"Amount",field:"amount",sortable:!0},{name:"date",label:"Date",field:"date",sortable:!0}],data:[{name:"12c6DSiU4Rq3P4ZxziKxzrL5LmMBrzjrJX",amount:159,date:"10.10.21"}]}},methods:{async readPort(){self=this;try{await self.port.open({baudRate:115200})}catch(e){try{await self.reader.releaseLock(),self.reader=void 0,await self.port.close(),await self.port.open({baudRate:115200})}catch(e){}}try{self.reader=self.port.readable.getReader();const{value:e,done:t}=await self.reader.read();e&&(self.readMessage=e),await self.reader.releaseLock(),self.reader=void 0}catch(e){}if(self.port)try{await self.port.close()}catch(e){}},async writeData(e){self=this;const t=new TextEncoder;try{await self.port.open({baudRate:115200})}catch(s){try{await self.writer.releaseLock(),self.writer=void 0,await self.port.close(),await self.port.open({baudRate:115200})}catch(s){}}try{self.writer=await self.port.writable.getWriter(),await self.writer.write(t.encode(e)),await self.writer.releaseLock(),self.writer=void 0}catch(s){}if(self.port)try{await self.port.close()}catch(s){}},async getFreshAddress(){self=this,self.$q.notify({spinner:a["a"],message:"Fetching address...",timeout:6e3}),await self.writeData("ADR");var e=setInterval((async function(){await self.readPort();var t=self.readMessage;const s=await self.ab2str(t);console.log(s);var a=s.split(",");console.log(a);for(var o=0;o<a.length;o++)"ADR"==a[o].substring(0,3)&&(sessionStorage.setItem("ADR",a[o].substring(3,a[o].length)),self.btcAddressNo=parseInt(sessionStorage.getItem("ADR")),clearInterval(e))}),2e3)},async sendFunds(){},async updateMempool(){self=this,self.mempool.endpoint=self.mempool},async getTransactions(){self=this,self.mempool.endpoint=self.mempool},getAddress(t){function s(t){var s=c.decode(t);return s=s.slice(4),s=e.concat([e.from("0488b21e","hex"),s]),c.encode(s)}var a=s(sessionStorage.getItem("zpub")),o=n.bip32.fromBase58(a);console.log(o.derive(0).derive(t).publicKey);const{address:r}=n.payments.p2wpkh({pubkey:n.bip32.fromBase58(a).derive(0).derive(t).publicKey});self.btcCurrentAddress=r},copyToClip(e){self=this,Object(o["a"])(e).then((()=>{self.$q.notify({icon:"content_copy",message:"Copied"})})).catch((()=>{self.$q.notify({icon:"error",message:"Copy failed"})}))},async ab2str(e){return String.fromCharCode.apply(null,new Uint16Array(e))}},created(){self=this,sessionStorage.getItem("ADR")||(self.btcAddressNo=1),self.getAddress(self.btcAddressNo)}}}).call(this,s("1c35").Buffer)},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t){},7:function(e,t){},dd40:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"row q-col-gutter-md justify-center"},[s("div",{staticClass:"col-12 col-md-7 col-lg-6 q-gutter-y-md"},[s("h5",{staticClass:"q-pt-lg q-mb-xs"},[e._v("\n        Verify address: "+e._s(e.btcVerifyAddress)),s("q-tooltip",[e._v("This `Verify address` MUST be the same as the one on the hardware\n          wallet!")])],1),s("q-card",{staticClass:"q-mt-lg"},[s("q-card-section",[s("q-form",{staticClass:"q-gutter-md",on:{submit:e.sendFunds}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-9"},[s("q-input",{staticClass:"q-pr-md",attrs:{filled:"",dense:"",label:"Bitcoin address"},model:{value:e.btcSendAddress,callback:function(t){e.btcSendAddress=t},expression:"btcSendAddress"}})],1),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{filled:"",dense:"",label:"Amount"},model:{value:e.btcSendAmount,callback:function(t){e.btcSendAmount=t},expression:"btcSendAmount"}})],1)]),s("q-btn",{attrs:{unelevated:"",color:"primary",disable:""==e.btcSendAddress||e.btcSendAmount<1e-4,type:"submit"}},[e._v("Send bitcoin")])],1)],1)],1),s("q-card",{staticClass:"q-mt-lg"},[s("q-card-section",[s("h6",{staticClass:"text-subtitle1 q-mt-none q-mb-sm"},[e._v("\n            Transactions:\n          ")])]),s("q-card-section",[s("q-table",{attrs:{data:e.data,columns:e.columns,"row-key":"name",dark:"",color:"amber"}})],1)],1)],1),s("div",{staticClass:"col-12 col-md-3 q-gutter-y-md"},[s("q-card",[s("q-card-section",[s("h6",{staticClass:"text-subtitle1 q-mt-none q-mb-sm"},[e._v("\n            Receive address\n            "),s("q-btn",{attrs:{flat:"",dense:"",color:"primary",label:"get fresh address"},on:{click:e.getFreshAddress}})],1)]),s("center",[s("vue-qrcode",{staticStyle:{width:"50%"},attrs:{value:e.btcCurrentAddress}}),s("q-card-section",{staticClass:"q-px-auto"},[s("q-btn",{attrs:{dense:"",unelevated:"",color:"primary"},on:{click:function(t){return e.copyToClip(e.btcCurrentAddress)}}},[s("div",{staticClass:"cursor-pointer"},[s("q-tooltip",[e._v(" Copy to clipboard ")]),e._v("\n                "+e._s(e.btcCurrentAddress)+"\n              ")],1)])],1)],1)],1),s("q-card",[s("q-card-section",[s("h6",{staticClass:"text-subtitle1 q-mt-none q-mb-sm"},[e._v("\n            Bowser uses\n            "),s("a",{attrs:{target:"_blank",href:"https://mempool.space"}},[e._v("mempool.space")]),e._v("\n            api for transaction data,"),s("br"),e._v("you can also use use your own\n            mempool.space\n          ")])]),s("q-card-section",{staticClass:"q-px-auto"},[s("q-btn",{attrs:{unelevated:"",color:"primary",icon:"edit"}},[s("div",{staticClass:"cursor-pointer"},[s("q-tooltip",[e._v(" Point to another Mempool ")]),e._v("\n              "+e._s(this.mempool.endpoint)+"\n              "),s("q-popup-edit",{model:{value:e.mempool.endpoint,callback:function(t){e.$set(e.mempool,"endpoint",t)},expression:"mempool.endpoint"}},[s("q-input",{attrs:{color:"accent"},model:{value:e.mempool.endpoint,callback:function(t){e.$set(e.mempool,"endpoint",t)},expression:"mempool.endpoint"}}),s("center",[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""},on:{click:function(t){return e.updateMempool()}}},[e._v("set")]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""}},[e._v("cancel")])],1)],1)],1)])],1)],1)],1)])])},o=[],r=s("00be"),n=r["a"],c=s("2877"),l=s("9989"),i=s("05c0"),d=s("f09f"),p=s("a370"),m=s("0378"),u=s("27f9"),f=s("9c40"),b=s("eaac"),v=s("42a1"),q=s("7f67"),w=s("eebe"),g=s.n(w),y=Object(c["a"])(n,a,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QPage:l["a"],QTooltip:i["a"],QCard:d["a"],QCardSection:p["a"],QForm:m["a"],QInput:u["a"],QBtn:f["a"],QTable:b["a"],QPopupEdit:v["a"]}),g()(y,"directives",{ClosePopup:q["a"]})}}]);